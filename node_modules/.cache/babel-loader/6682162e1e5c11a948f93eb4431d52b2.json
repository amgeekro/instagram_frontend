{"ast":null,"code":"import _slicedToArray from \"/Users/amirhosein/Documents/project/fast_api/instagram_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/amirhosein/Documents/project/fast_api/instagram_frontend/src/Post.js\";\nimport React, { useState, useEffect } from \"react\";\nimport './Post.css';\nimport { Avatar, Button } from \"@material-ui/core\";\nvar BASE_URL = \"http://localhost:8000/\";\nfunction Post(_ref) {\n  var _this = this;\n  var post = _ref.post,\n    authToken = _ref.authToken,\n    authTokenType = _ref.authTokenType;\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    imageUrl = _useState2[0],\n    setImageUrl = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    comments = _useState4[0],\n    setComments = _useState4[1];\n  useEffect(function () {\n    if (post.image_url_type === 'absolute') {\n      setImageUrl(post.image_url);\n    } else {\n      setImageUrl(BASE_URL + post.image_url);\n    }\n  }, []);\n  useEffect(function () {\n    setComments(post.comments);\n  }, []);\n  var handleDelete = function handleDelete(event) {\n    event.preventDefault();\n    var requestOptions = {\n      method: \"GET\",\n      headers: new Headers({\n        \"Authorization\": authTokenType + \" \" + authToken\n      })\n    };\n    fetch(BASE_URL + 'post/delete/' + post.id, requestOptions).then(function (response) {\n      if (response.ok) {\n        window.location.reload();\n      }\n      throw response;\n    }).catch(function (error) {\n      console.log(error);\n    });\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"post\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"post_header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    alt: \"user image\",\n    src: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"post_headerInfo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 21\n    }\n  }, post.user.username), /*#__PURE__*/React.createElement(Button, {\n    className: \"post_delete\",\n    onClick: handleDelete,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 21\n    }\n  }, \"Delete\"))), /*#__PURE__*/React.createElement(\"img\", {\n    className: \"post_image\",\n    src: imageUrl,\n    alt: \"post_image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"post_caption\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }\n  }, post.caption), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"post_comments\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }\n  }, comments.map(function (comment) {\n    return /*#__PURE__*/React.createElement(\"p\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 29\n      }\n    }, comment.username, \":\"), \" \", comment.text);\n  })));\n}\nexport default Post;","map":{"version":3,"names":["React","useState","useEffect","Avatar","Button","BASE_URL","Post","post","authToken","authTokenType","imageUrl","setImageUrl","comments","setComments","image_url_type","image_url","handleDelete","event","preventDefault","requestOptions","method","headers","Headers","fetch","id","then","response","ok","window","location","reload","catch","error","console","log","user","username","caption","map","comment","text"],"sources":["/Users/amirhosein/Documents/project/fast_api/instagram_frontend/src/Post.js"],"sourcesContent":["import React, {useState, useEffect} from \"react\";\nimport './Post.css';\nimport { Avatar, Button } from \"@material-ui/core\";\n\nconst BASE_URL = \"http://localhost:8000/\";\n\nfunction Post({post, authToken, authTokenType}) {\n    const [imageUrl, setImageUrl] = useState('');\n    const [comments, setComments] = useState([]);\n\n    useEffect(() => {\n        if (post.image_url_type === 'absolute'){\n            setImageUrl(post.image_url)\n        } else {\n            setImageUrl(BASE_URL + post.image_url)\n        }\n    }, [])\n\n    useEffect(() => {\n        setComments(post.comments)\n    }, [])\n\n    const handleDelete = (event) => {\n        event.preventDefault()\n        const requestOptions = {\n            method: \"GET\",\n            headers: new Headers({\n                \"Authorization\": authTokenType + \" \" + authToken\n            })\n        }\n\n        fetch(BASE_URL + 'post/delete/' + post.id, requestOptions)\n        .then(response => {\n            if(response.ok) {\n                window.location.reload()\n            }\n            throw response\n        }).catch(error => {\n            console.log(error)\n        })\n    }\n\n    return (\n        <div className=\"post\">\n            <div className=\"post_header\">\n                <Avatar alt=\"user image\" src=\"\"/>\n                <div className=\"post_headerInfo\">\n                    <h3>{post.user.username}</h3>\n                    <Button className=\"post_delete\" onClick={handleDelete}>Delete</Button>\n                </div>\n            </div>\n            <img className=\"post_image\" src={imageUrl} alt=\"post_image\"/>\n            <h4 className=\"post_caption\">{post.caption}</h4>\n\n            <div className=\"post_comments\">\n                {\n                    comments.map((comment) => (\n                        <p>\n                            <strong>{comment.username}:</strong> {comment.text}\n                        </p>\n                    ))\n                }\n            </div>\n\n            {}\n        </div>\n    )\n}\n\nexport default Post;"],"mappings":"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"},"metadata":{},"sourceType":"module"}